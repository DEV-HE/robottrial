<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Global</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Global</h1>

    




<section>

<header>
    
        <h2></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="PROMPTS"><span class="type-signature">(constant) </span>PROMPTS<span class="type-signature"></span></h4>




<div class="description">
    Objeto que almacena las plantillas de texto utilizadas para guiar las respuestas
dentro de una interfaz de procesamiento de lenguaje natural especializada en finanzas y gestión empresarial.
Este objeto es utilizado para estructurar las respuestas dadas a las preguntas de los usuarios,
asegurando que la interacción siga un formato coherente que resalta los servicios y beneficios ofrecidos por VOZ FINANZAS.
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="plugin_prompt.js.html">plugin/prompt.js</a>, <a href="plugin_prompt.js.html#line7">line 7</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="flowStaff"><span class="type-signature">(constant) </span>flowStaff<span class="type-signature"></span></h4>




<div class="description">
    Define el flujo de interacción para el staff, que incluye la conversión de texto a voz y el envío de audios a través de la mensajería.
Utiliza una combinación de acciones personalizadas y funciones asincrónicas para procesar y enviar mensajes de audio.
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="app.js.html">app.js</a>, <a href="app.js.html#line48">line 48</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="flowVoiceNote"><span class="type-signature">(constant) </span>flowVoiceNote<span class="type-signature"></span></h4>




<div class="description">
    Define el flujo de interacción para las notas de voz, incluyendo la conversión de voz a texto.
Este flujo comienza con un mensaje inicial, luego intenta convertir la entrada de voz en texto
utilizando `handlerAI`, actualiza el estado con la respuesta generada, y redirige el flujo
según la determinación del empleado basado en la respuesta completa.
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="app.js.html">app.js</a>, <a href="app.js.html#line104">line 104</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="buildPromptEmployee"><span class="type-signature"></span>buildPromptEmployee<span class="signature">(employees)</span><span class="type-signature"> &rarr; {String}</span></h4>
    

    



<div class="description">
    Construye un mensaje (prompt) basado en un arreglo de empleados, asegurando que cada empleado tenga un nombre único y creando una descripción estructurada para cada uno.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>employees</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last">Un arreglo de objetos que representan a los empleados. Cada objeto debe tener un `name` y una `description`. Es opcional y su valor por defecto es un arreglo vacío.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="plugin_employee.rol.js.html">plugin/employee.rol.js</a>, <a href="plugin_employee.rol.js.html#line12">line 12</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>
<ul>
        <li>

<dl>
    <dt>
        <div class="param-desc">
        Lanza un error si el argumento `employees` no es un arreglo.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">Error</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>

</li>
    
        <li>

<dl>
    <dt>
        <div class="param-desc">
        Lanza un error si se encuentran nombres de empleados duplicados en el arreglo.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">Error</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>

</li>
    </ul>


<h5>Returns:</h5>

        
<div class="param-desc">
    Una cadena de texto que representa el mensaje construido siguiendo las instrucciones de formato definidas en `PROMPTS.FORMAT_INSTRUCTIONS`.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">String</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="cleanText"><span class="type-signature"></span>cleanText<span class="signature">(inputText)</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    Limpia el texto de entrada eliminando caracteres no deseados o normalizando el texto.
Este es un esqueleto inicial de la función, que actualmente devuelve el texto sin cambios.
Se espera que en futuras implementaciones, esta función realice operaciones de limpieza
como eliminar espacios en blanco extra, corregir errores ortográficos, eliminar caracteres
especiales no permitidos, etc.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>inputText</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">El texto de entrada que se va a limpiar. Este parámetro espera
una cadena de caracteres que puede contener elementos no deseados o que requiere algún tipo
de normalización o limpieza.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="plugin_util.js.html">plugin/util.js</a>, <a href="plugin_util.js.html#line24">line 24</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Retorna el texto después de aplicar las operaciones de limpieza. En la versión
actual de la función, simplemente se devuelve el texto de entrada sin modificaciones.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    




    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>/ Retorna el texto de entrada sin cambios
cleanText("Este es un texto de ejemplo.");</code></pre>

    <pre class="prettyprint"><code>/ En futuras implementaciones, podría retornar el texto limpio
/ cleanText(" Este es un   texto de ejemplo. ");
/ "Este es un texto de ejemplo."</code></pre>



        
            

    

    
    <h4 class="name" id="convertOggMp3"><span class="type-signature">(async) </span>convertOggMp3<span class="signature">(inputStream, outStream)</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>
    

    



<div class="description">
    Convierte un archivo de audio desde el formato OGG a MP3.

Esta función toma un flujo de entrada y un flujo de salida, realizando la conversión
del archivo de audio del formato original (OGG) al formato objetivo (MP3). La calidad
del audio en el archivo resultante se establece en 96 kbps. La función devuelve una promesa
que se resuelve a `true` una vez que la conversión ha finalizado exitosamente.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>inputStream</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last">El flujo de entrada que contiene el archivo OGG a convertir.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>outStream</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last">El flujo de salida donde se guardará el archivo MP3 resultante.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="services_convert.js.html">services/convert.js</a>, <a href="services_convert.js.html#line20">line 20</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Una promesa que se resuelve a `true` una vez que la conversión ha finalizado.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;boolean></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="determineEmployee"><span class="type-signature"></span>determineEmployee<span class="signature">(text)</span><span class="type-signature"> &rarr; {Object}</span></h4>
    

    



<div class="description">
    Determina la herramienta y entrada de herramienta basado en una cadena de texto.
Extrae la acción y entrada de acción de un formato específico en el texto proporcionado.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>text</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Cadena de texto que sigue un formato específico para ser analizado.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="plugin_employee.rol.js.html">plugin/employee.rol.js</a>, <a href="plugin_employee.rol.js.html#line49">line 49</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        Lanza un error si no se puede analizar el texto proporcionado.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">Error</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    Devuelve un objeto con `tool`, `toolInput` y `log` que contiene la herramienta, entrada de la herramienta y texto original, respectivamente.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="finalPrompt"><span class="type-signature"></span>finalPrompt<span class="signature">(message, parseInstructions)</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    Construye un prompt final combinando un prefijo definido, instrucciones de parseo específicas y un sufijo que incluye el mensaje recibido.
Esta función es útil para preparar comandos o mensajes que serán procesados o interpretados por otro sistema o componente.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>message</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last">El mensaje que se incorporará al sufijo del prompt. Este parámetro puede ser de cualquier tipo,
pero generalmente se espera que sea una cadena de texto. La función lo insertará directamente en el sufijo,
reemplazando cualquier marcador de posición "{input}" presente en el sufijo predeterminado.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>parseInstructions</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last">Instrucciones específicas de parseo que se deben incluir entre el prefijo y el sufijo en el prompt final.
Este parámetro puede variar ampliamente en tipo y formato dependiendo de las necesidades del sistema receptor.
Su contenido se coloca directamente en el prompt sin ninguna modificación adicional.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="plugin_employee.rol.js.html">plugin/employee.rol.js</a>, <a href="plugin_employee.rol.js.html#line91">line 91</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Retorna el prompt final compuesto por el prefijo global, las instrucciones de parseo proporcionadas,
y el sufijo que ahora incluye el mensaje. Este prompt está listo para ser usado o enviado al sistema o componente correspondiente.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="handlerAI"><span class="type-signature">(async) </span>handlerAI<span class="signature">(ctx)</span><span class="type-signature"> &rarr; {Promise.&lt;string>}</span></h4>
    

    



<div class="description">
    Esta función realiza los siguientes pasos:
1. Descarga el mensaje de medios (nota de voz) como un buffer.
2. Guarda el buffer en un archivo temporal con formato .ogg.
3. Convierte el archivo .ogg a formato .mp3.
4. Utiliza el servicio de voz a texto para convertir el contenido de audio en texto.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>ctx</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">El contexto de la solicitud, que contiene los datos de la nota de voz.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="utils.js.html">utils.js</a>, <a href="utils.js.html#line10">line 10</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    El texto transcrito de la nota de voz.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;string></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="main"><span class="type-signature">(async) </span>main<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Función principal que inicializa y configura el bot.
Esta función asincrónica realiza las siguientes operaciones:
- Inicializa el adaptador de base de datos utilizando `MockAdapter`.
- Crea un flujo de procesos con `createFlow`, integrando `flowVoiceNote` y `flowStaff`.
- Establece el proveedor del servicio mediante `createProvider`, usando `BaileysProvider` como proveedor.
- Define y configura los empleados digitales, los cuales son representantes virtuales especializados en diversas áreas.
- Inicia el bot con una configuración específica que incluye flujo de trabajo, proveedor de servicio y base de datos.
- Activa `QRPortalWeb` para la interacción inicial o autenticación.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="app.js.html">app.js</a>, <a href="app.js.html#line140">line 140</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    No retorna ningún valor.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="textToVoice"><span class="type-signature">(async) </span>textToVoice<span class="signature">(text, voiceId<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Promise.&lt;string>}</span></h4>
    

    



<div class="description">
    Convierte texto en voz utilizando la API de ElevenLabs y luego convierte el audio MP3 a MP4.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>text</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Texto que se desea convertir en voz.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>voiceId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    'U3nbunY0iWT9Vu9nsbab'
                
                </td>
            

            <td class="description last">ID de la voz seleccionada para la síntesis de voz. Por defecto se usa una voz predeterminada.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="services_eventlab.js.html">services/eventlab.js</a>, <a href="services_eventlab.js.html#line21">line 21</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Una promesa que resuelve la ruta del archivo MP4 generado.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;string></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="voiceToText"><span class="type-signature">(async) </span>voiceToText<span class="signature">(path)</span><span class="type-signature"> &rarr; {Promise.&lt;string>}</span></h4>
    

    



<div class="description">
    Convierte un archivo de audio en formato mp3 a texto utilizando la API de OpenAI.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>path</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">La ruta del archivo mp3.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="services_whisper.js.html">services/whisper.js</a>, <a href="services_whisper.js.html#line9">line 9</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    El texto transcribido del archivo de audio.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;string></span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="EmployeesClass.html">EmployeesClass</a></li><li><a href="OpenAiClass.html">OpenAiClass</a></li></ul><h3>Global</h3><ul><li><a href="global.html#PROMPTS">PROMPTS</a></li><li><a href="global.html#buildPromptEmployee">buildPromptEmployee</a></li><li><a href="global.html#cleanText">cleanText</a></li><li><a href="global.html#convertOggMp3">convertOggMp3</a></li><li><a href="global.html#determineEmployee">determineEmployee</a></li><li><a href="global.html#finalPrompt">finalPrompt</a></li><li><a href="global.html#flowStaff">flowStaff</a></li><li><a href="global.html#flowVoiceNote">flowVoiceNote</a></li><li><a href="global.html#handlerAI">handlerAI</a></li><li><a href="global.html#main">main</a></li><li><a href="global.html#textToVoice">textToVoice</a></li><li><a href="global.html#voiceToText">voiceToText</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Tue Mar 19 2024 02:11:14 GMT-0600 (hora estándar central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>